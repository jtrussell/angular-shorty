angular.module("shorty",[]),angular.module("shorty").filter("shortyGroup",function(){"use strict";return function(a,b){if(!b||!a)return a;var c=[];return angular.forEach(a,function(a){b===a.group&&c.push(a)}),c}}),angular.module("shorty").filter("shortySort",function(){"use strict";var a=function(a,b){return a.group===b.group?a.combo<b.combo?-1:1:""===a.group?1:""===b.group?-1:a.group<b.group?-1:1};return function(b){return b?(b.sort(a),b):b}}),angular.module("shorty").provider("shortyFilter",function(){"use strict";var a=this,b={command:"⌘",shift:"⇧",left:"←",right:"→",up:"↑",down:"↓","return":"↩",enter:"↩",backspace:"⌫"},c={};this.setKeyMap=function(c){return angular.forEach(c,function(a,c){b[c]=a}),a},this.$get=function(){return function(a,d){if(d&&c.hasOwnProperty(a))return c[a];var e=a.replace(/\s+/g," ").split(" ").map(function(a){return a.split("+").map(function(a){var c=a.toLowerCase();return b.hasOwnProperty(c)&&(a=b[c]),a}).join("+")}).join(" ");return d&&(e=e.split(" "),c[a]=e),e}}}),angular.module("shorty").provider("shortyMousetrap",function(){"use strict";var a;this.setMousetrap=function(b){a=b},this.$get=["$window",function(b){var c=a||b.Mousetrap,d={};return d.get=function(){return c},d.getAttachedTo=function(a){var b=new c(a[0]);return b},d}]}),angular.module("shorty").factory("shorty",["$log","shortyMousetrap","shortySortFilter","shortyGroupFilter",function(a,b,c,d){"use strict";function e(a){return i=a,e}var f=b.get(),g=[],h=[],i=null;return e.on=function(a,b,c,d,f,h){return g.push({combo:a,event:b,group:d||"",desc:c||"",global:angular.isDefined(f)?f:!1,keyboardEvent:h||!1}),e},e.onKeyPress=function(a,b,c,d){return e.on(a,b,c,d,!1,"keypress")},e.onKeyDown=function(a,b,c,d){return e.on(a,b,c,d,!1,"keydown")},e.onKeyUp=function(a,b,c,d){return e.on(a,b,c,d,!1,"keyup")},e.onGlobal=function(a,b,c,d){return e.on(a,b,c,d,!0)},e.onGlobalKeyPress=function(a,b,c,d){return e.on(a,b,c,d,!0,"keypress")},e.onGlobalKeyDown=function(a,b,c,d){return e.on(a,b,c,d,!0,"keydown")},e.onGlobalKeyUp=function(a,b,c,d){return e.on(a,b,c,d,!0,"keyup")},e.off=function(a,b){return b=b||f,b.unbind(a),e},e.broadcastTo=function(d,j){var k=j?b.getAttachedTo(j):f;return angular.forEach(g,function(b){var c="bind";b.global&&(angular.isDefined(k.bindGlobal)?c="bindGlobal":a.debug('Mousetrap plugin "bindGlobal" not available. Falling back to regular bind'));var e=[b.combo,function(){d.$broadcast(b.event),d.$apply()}];if(b.keyboardEvent&&e.push(b.keyboardEvent),k[c].apply(k,e),!j){var f;for(f=h.length;f--;)b.combo===h[f].combo&&(h.splice(f,1),f=0);h.push(b)}d.$on("$destroy",function(){if(k.unbind(b.combo),!j){var a;for(a=h.length;a--;)b.combo===h[a].combo&&(h.splice(a,1),a=0)}})}),g.length=0,i=null,c(h),e},e.getActiveShortcuts=function(a){return d(h,a)},e}]);